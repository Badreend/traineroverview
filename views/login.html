<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <title>Trainer Overview</title>


   

    <script src="js/jquery-1.10.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>


    <script src="js/plugins/mostrar_nav.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
        <script src="js/jquery.ui.touch-punch.js"></script>


    <script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="js/app.js"></script>

    <link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/css.css">

</head>


<div id="container">
	<div class="row">
		{{#each trainers}}
		<div class="col-md-3 col-sm-6 trainer_col">
			<div class="trainer" data-id="{{this.id}}">
				<div class="trainer_profile">
					<div class="login_img_container">
						<img src="{{this.pictureUrl}}" data-pin-nopin="true">
					</div>
					<h2>{{this.GetFullName}}</h2>
				</div>
			</div>
		</div>
		{{/each}}
	</div>
</div>

<style>


</style>

<script type="text/javascript">
	$(".trainer").click(function(){
	$( this ).unbind( "click" );
	 $(".trainer").not(this).animate({
	 	opacity: 0.0,
	  }, 1000, function() {
	  this.closest('div').remove();
	 });
	 // $( this ).parent().get( 0 ).css({
		// position: 'absolute'

	 // });
	$($( this ).parent().get( 0 )).css({
		 margin: 'auto',
		 position: 'absolute',
		 top: '150',
		 left: '0',
		 right: '0',
		 bottom: '0'
	});

	$input = ('<div id="loginform_placeholder"><div id="password_container"> <input type="password" class="password" size="20" value="" placeholder="Password"/></div><div id="login_container"><h2>Login</h2></div></div>')



	$($( this ).get( 0 )).append($input);
	$(".password").on("keyup", function(e){
		var code = e.which;
		if(code ==13){
			var trainerId = $(this).closest("div.trainer").data("id");
			var password = $(this).val();
			login(trainerId, password);
		}
	});
	});
	
	function login(trainerId, password){
		$.ajax({
			url: "loginRequest",
			method: "POST",
			data: {trainerId: trainerId, password: password},
			success:function(data) {
				if(!data.valid){
					alert(data.message);
				}else{
					window.location = data.redirect;
				}
			}
		});
	}
</script>

    </body>
</html>