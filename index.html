<!--
Badr Ismaili 2013-2014

-->
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	<title>Trainer Overview</title>
	<!--
		<style>
	#mapDiv {
		width:100%;
		height:750px;
	}
	</style>
-->
	<link rel="stylesheet" type="text/css" href="bootstrap/css/bootstrap.css">

	<link rel="stylesheet" type="text/css" href="css/css.css">


	<script src="js/jquery-1.10.1.min.js"></script>
	<script src="js/plugins/mostrar_nav.js"></script>
	<script src="bootstrap/js/bootstrap.min.js"></script>

	<script src="/socket.io/socket.io.js"></script>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

	<script type="text/javascript">

	if ( !window.requestAnimationFrame ) {

		window.requestAnimationFrame = ( function() {

			return window.webkitRequestAnimationFrame ||
			window.mozRequestAnimationFrame ||
			window.oRequestAnimationFrame ||
			window.msRequestAnimationFrame ||
			function( /* function FrameRequestCallback */ callback, /* DOMElement Element */ element ) {

				window.setTimeout( callback, 1000 / 60 );

			};

		} )();

	}


	var socket = io.connect();

	console.log($);
	var app = {

	}

	app.map = {
		mapDiv: undefined,
		mapOptions: undefined,
		locations:'test'
	}

	app.map.init = function(){
		mapDiv = document.getElementById("mapDiv"),
		mapOptions = {
			center: new google.maps.LatLng (52.033518, 5.337378),
			zoom: 1, 
			disableDefaultUI: true,

			styles: [{"featureType":"all","elementType":"labels.text.fill","stylers":[{"color":"#ffffff"}]},{"featureType":"all","elementType":"labels.text.stroke","stylers":[{"color":"#000000"},{"lightness":13}]},{"featureType":"administrative","elementType":"geometry.fill","stylers":[{"color":"#000000"}]},{"featureType":"administrative","elementType":"geometry.stroke","stylers":[{"color":"#144b53"},{"lightness":14},{"weight":1.4}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#08304b"}]},{"featureType":"poi","elementType":"geometry","stylers":[{"color":"#0c4152"},{"lightness":5}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#000000"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#0b434f"},{"lightness":25}]},{"featureType":"road.arterial","elementType":"geometry.fill","stylers":[{"color":"#000000"}]},{"featureType":"road.arterial","elementType":"geometry.stroke","stylers":[{"color":"#0b3d51"},{"lightness":16}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"color":"#000000"}]},{"featureType":"transit","elementType":"all","stylers":[{"color":"#146474"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#021019"}]}]
		};

		app.map.mapObj = new google.maps.Map(mapDiv, mapOptions);
		app.map.locations = [];
		app.map.markers = [];
		locations = app.map.locations;
		locations.push ({name:"badr", LatLng: new google.maps.LatLng(52.033318, 5.337372)});
		locations.push ({name:"inge", LatLng: new google.maps.LatLng(52.035518, 5.337313)});
		locations.push ({name:"moniek", LatLng: new google.maps.LatLng(52.033518, 5.337378)});
		var iconBase = 'imgs/heads/';
		app.map.bounds = new google.maps.LatLngBounds();
		for(var i = 0; i < locations.length;i++){
			var marker = new google.maps.Marker({
				position: locations[i].LatLng, 
				map:app.map.mapObj, 
				title:locations[i].name,

				options: {
					icon: {
						url: iconBase+locations[i].name+".png",
						scaledSize: new google.maps.Size(40, 40), 
					}
				}
			});			
			app.map.bounds.extend (locations[i].LatLng);
		}
		app.map.markers.push(marker);
		app.map.mapObj.fitBounds(app.map.bounds);

	}

	function init(){

		app.map.init();
		app.map.markers[0]; 

	}

	function update(){
		requestAnimationFrame(update);
	}

	window.onload = function(){
		init();
	}
	var dataInputStr = "";
	socket.on('dataClient', function(data){
		var lat = parseFloat(data.lat);
		var lon = parseFloat(data.lon);
		console.log(lat + "  " + lon)
		app.map.markers[0].setPosition( new google.maps.LatLng( lat, lon ) );

	});

	$(document).ready(function(){
		$('#mobile-nav').click(function(event) {
  			$('nav').toggleClass('active');
		});
	});


</script>


</head>
<body>
	<div class="container-full">
			<div id="mapDiv"></div> 
		<div id="mobile-nav"></div>
		<nav>
		  <ul class="menu">
		    <li><a href="#">Home</a></li>
		  </ul>
		</nav>

	
	</div>
</body>
</html>